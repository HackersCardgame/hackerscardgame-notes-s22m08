(()=>{"use strict";"localhost"===window.location.hostname||"".concat(window.guardian.config.frontendAssetsFullURL,"assets/");var t,n,e="dotcom.performance",r=["https://www.theguardian.com"];t=function(){var t=[].slice.call(document.querySelectorAll(".email-sub__iframe"));return t.forEach((function(t){t&&t.contentWindow&&t.contentWindow.postMessage("resize","https://www.theguardian.com")})),window.addEventListener("message",(function(n){if(r.includes(n.origin)){var e=t.filter((function(t){try{if(null!==t.contentWindow&&null!==n.source)return t.contentWindow===n.source}catch(t){return!1}return!1}));if(0!==e.length)try{var a=JSON.parse(n.data);if(!function(t){if("[object Object]"!==Object.prototype.toString.call(t))return!1;var n=Object.getPrototypeOf(t);return null===n||n===Object.prototype}(a)||"string"!=typeof a.type)return;"set-height"===a.type&&e.forEach((function(t){if("number"==typeof a.value)t.height="".concat(a.value);else if("string"==typeof a.value){var n=parseInt(a.value,10);Number.isInteger(n)&&(t.height="".concat(n))}}))}catch(t){}}})),Promise.resolve()},n=function(){!function(t,n){var r=function(t){var n=window.performance,r="".concat(e,".").concat(t,"-start"),a="".concat(e,".").concat(t,"-end");return"getEntriesByName"in n?{start:function(){var t,e,a=(null!==(t=null!==(e=n.mark(r))&&void 0!==e?e:n.getEntriesByName(r,"mark")[0])&&void 0!==t?t:{}).startTime,o=void 0===a?-1:a;return Math.ceil(o)},end:function(){var e,o;n.mark(a);var i=(null!==(e=null!==(o=n.measure(t,r,a))&&void 0!==o?o:n.getEntriesByName(t,"measure")[0])&&void 0!==e?e:{}).duration,c=void 0===i?-1:i;return Math.ceil(c)},clear:function(){n.clearMarks(r),n.clearMarks(a),n.clearMeasures(t)}}:{start:function(){return-1},end:function(){return-1},clear:function(){}}}(t),a=r.start,o=r.end;a(),n().then((function(){o()})).catch((function(){o()}))}("newsletterEmbedIframe",t.bind(null,null))},window.guardian.mustardCut||window.guardian.polyfilled?n():window.guardian.queue.push(n)})();
//# sourceMappingURL=newsletterEmbedIframe.legacy.cec97e2a475415dfaffc.js.map