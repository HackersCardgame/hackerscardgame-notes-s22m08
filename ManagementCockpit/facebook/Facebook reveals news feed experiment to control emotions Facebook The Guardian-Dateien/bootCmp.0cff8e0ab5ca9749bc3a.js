(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(n){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(t){e(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}var o,r,a,i,c=function(e,t,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(e,n):r?r.value=n:t.set(e,n),n},s=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};class l{constructor(e){o.set(this,void 0);try{const t=(new Date).toString();e.setItem(t,t);const n=e.getItem(t)==t;e.removeItem(t),n&&c(this,o,e,"f")}catch(e){}}isAvailable(){return Boolean(s(this,o,"f"))}get(e){try{var t,n;const{value:r,expires:a}=JSON.parse(null!==(t=null===(n=s(this,o,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:"");return a&&new Date>new Date(a)?(this.remove(e),null):r}catch(e){return null}}set(e,t,n){var r;return null===(r=s(this,o,"f"))||void 0===r?void 0:r.setItem(e,JSON.stringify({value:t,expires:n}))}remove(e){var t;return null===(t=s(this,o,"f"))||void 0===t?void 0:t.removeItem(e)}clear(){var e;return null===(e=s(this,o,"f"))||void 0===e?void 0:e.clear()}getRaw(e){var t,n;return null!==(t=null===(n=s(this,o,"f"))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}setRaw(e,t){var n;return null===(n=s(this,o,"f"))||void 0===n?void 0:n.setItem(e,t)}}o=new WeakMap;const u=new(i=class{constructor(){r.set(this,void 0),a.set(this,void 0)}get local(){return c(this,r,s(this,r,"f")||new l(localStorage),"f")}get session(){return c(this,a,s(this,a,"f")||new l(sessionStorage),"f")}},r=new WeakMap,a=new WeakMap,i);var d;const f="gu.logger",p={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"}},g=e=>{const{background:t,font:n}=p[e];return`background: ${t}; color: ${n}; padding: 2px 3px; border-radius:3px`},w=(e,...t)=>{if(!(u.local.get(f)||"").includes(e))return;const n=[g("common"),"",g(e),""];console.log(`%c@guardian%c %c${e}%c`,...n,...t)};let m;"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(d=window.guardian).logger||(d.logger={subscribeTo:e=>{const t=u.local.get(f)?u.local.get(f).split(","):[];t.includes(e)||t.push(e),u.local.set(f,t.join(",")),w(e,"ðŸ”” Subscribed, hello!")},unsubscribeFrom:e=>{w(e,"ðŸ”• Unsubscribed, good-bye!");const t=u.local.get(f).split(",").filter((t=>t!==e));u.local.set(f,t.join(","))},teams:()=>Object.keys(p)}));const v=()=>m,h=e=>{var t,n;null===(t=window.performance)||void 0===t||null===(n=t.mark)||void 0===n||n.call(t,e),w("cmp","[event]",e)},b="undefined"==typeof window,y=()=>{console.warn("This is a server-side version of the @guardian/consent-management-platform","No consent signals will be received.")},_=e=>()=>(y(),e),S={__disable:y,__enable:_(!1),__isDisabled:_(!1),hasInitialised:_(!1),init:y,showPrivacyManager:y,version:"n/a",willShowPrivacyMessage:_(Promise.resolve(!1)),willShowPrivacyMessageSync:_(!1)};let C;const P=()=>(void 0===C&&(C=!!b||window.location.host.endsWith(".theguardian.com")),C),M=P()?"https://sourcepoint.theguardian.com":"https://cdn.privacy-mgmt.com",k=async()=>{return{personalisedAdvertising:!("Y"===(await(e="getUSPData",new Promise(((t,n)=>{window.__uspapi?window.__uspapi(e,1,((e,o)=>o?t(e):n(new Error("Unable to get getUSPData data")))):n(new Error("No __uspapi found on window"))})))).uspString.charAt(2))};var e},E=async()=>{return{doNotSell:"Y"===(await(e="getUSPData",new Promise(((t,n)=>{window.__uspapi?window.__uspapi(e,1,((e,o)=>o?t(e):n(new Error("Unable to get getUSPData data")))):n(new Error("No __uspapi found on window"))})))).uspString.charAt(2)};var e},$=e=>new Promise(((t,n)=>{window.__tcfapi?window.__tcfapi(e,2,((o,r)=>r?t(o):n(new Error(`Unable to get ${e} data`)))):n(new Error("No __tcfapi found on window"))})),F={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,10:!1},O=async()=>{const[e,t]=await Promise.all([$("getTCData"),$("getCustomVendorConsents")]);if(void 0===e){var o;const e=null!==(o=v())&&void 0!==o?o:"undefined";throw new Error(`No TC Data found with current framework: ${e}`)}const r=n(n({},F),e.purpose.consents),{eventStatus:a,gdprApplies:i,tcString:c,addtlConsent:s}=e,{grants:l}=t;return{consents:r,eventStatus:a,vendorConsents:Object.keys(l).sort().reduce(((e,t)=>n(n({},e),{},{[t]:l[t].vendorGrant})),{}),addtlConsent:s,gdprApplies:i,tcString:c}},j=[],x=e=>{var t;return"cmpuishown"===(null===(t=e.tcfv2)||void 0===t?void 0:t.eventStatus)},T=(e,t)=>{if(x(t))return;const n=JSON.stringify(t);n!==e.lastState&&(e.fn(t),e.lastState=n)},I=e=>{const t=b?void 0:navigator.globalPrivacyControl;if(e.tcfv2){const o=e.tcfv2.consents;return n(n({},e),{},{canTarget:Object.keys(o).length>0&&Object.values(o).every(Boolean),framework:"tcfv2",gpcSignal:t})}return e.ccpa?n(n({},e),{},{canTarget:!e.ccpa.doNotSell,framework:"ccpa",gpcSignal:t}):e.aus?n(n({},e),{},{canTarget:e.aus.personalisedAdvertising,framework:"aus",gpcSignal:t}):n(n({},e),{},{canTarget:!1,framework:null,gpcSignal:t})},A=async()=>{switch(v()){case"aus":return I({aus:await k()});case"ccpa":return I({ccpa:await E()});case"tcfv2":return I({tcfv2:await O()});default:throw new Error("no IAB consent framework found on the page")}},N=()=>{0!==j.length&&A().then((e=>{x(e)||j.forEach((t=>T(t,e)))}))},D=e=>{const t={fn:e};j.push(t),A().then((e=>{T(t,e)})).catch((()=>{}))},U=()=>{!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var o=n(2);e.exports=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){n(4),function(){if("function"!=typeof window.__tcfapi){var e,t=[],n=window,o=n.document;!n.__tcfapi&&function e(){var t=!!n.frames.__tcfapiLocator;if(!t)if(o.body){var r=o.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",o.body.appendChild(r)}else setTimeout(e,5);return!t}()&&(n.__tcfapi=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];if(!o.length)return t;if("setGdprApplies"===o[0])o.length>3&&2===parseInt(o[1],10)&&"boolean"==typeof o[3]&&(e=o[3],"function"==typeof o[2]&&o[2]("set",!0));else if("ping"===o[0]){var a={gdprApplies:e,cmpLoaded:!1,apiVersion:"2.0"};"function"==typeof o[2]&&o[2](a,!0)}else t.push(o)},n.addEventListener("message",(function(e){var t="string"==typeof e.data,o={};try{o=t?JSON.parse(e.data):e.data}catch(e){}var r=o.__tcfapiCall;r&&n.__tcfapi(r.command,r.version,(function(n,o){var a={__tcfapiReturn:{returnValue:n,success:o,callId:r.callId}};t&&(a=JSON.stringify(a)),e.source.postMessage(a,"*")}),r.parameter)}),!1))}}()},function(e,t,n){var o=n(0),r=n(5).f,a=Function.prototype,i=a.toString,c=/^s*function ([^ (]*)/;o&&!("name"in a)&&r(a,"name",{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},function(e,t,n){var o=n(0),r=n(6),a=n(10),i=n(11),c=Object.defineProperty;t.f=o?c:function(e,t,n){if(a(e),t=i(t,!0),a(n),r)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(0),r=n(2),a=n(7);e.exports=!o&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var o=n(8),r=n(1),a=o.document,i=r(a)&&r(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(9))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var o=n(1);e.exports=function(e){if(!o(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var o=n(1);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}}])};let R;const B=new Promise((e=>{R=e})),H=e=>"aus"==e?"https://au.theguardian.com":P()?null:"https://test.theguardian.com",L=(e,t={})=>{if((e=>{"tcfv2"===e?U():function(){var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var o=n?JSON.parse(t.data):t.data;if(o.__cmpCall){var r=o.__cmpCall;e.__uspapi(r.command,r.parameter,(function(e,o){var a={__cmpReturn:{returnValue:e,success:o,callId:r.callId}};t.source.postMessage(n?JSON.stringify(a):a,"*")}))}}catch(o){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var o=t.body,r=t.createElement("iframe");r.style.cssText="display:none",r.name="__uspapiLocator",o.appendChild(r)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))}()})(e),window._sp_)throw new Error("Sourcepoint global (window._sp_) is already defined!");(e=>{w("cmp",`Framework set to ${e}`),m=e})(e),N();const o="tcfv2"==e?"gdpr":"ccpa";w("cmp",`framework: ${e}`),w("cmp",`frameworkMessageType: ${o}`),window._sp_queue=[],window._sp_={config:{baseEndpoint:M,accountId:1257,propertyHref:H(e),targetingParams:{framework:e},pubData:n(n({},t),{},{cmpInitTimeUtc:(new Date).getTime()}),events:{onConsentReady:(e,t,n)=>{w("cmp",`onConsentReady ${e}`),e==o&&(w("cmp",`consentUUID ${t}`),w("cmp",`euconsent ${n}`),h("cmp-got-consent"),setTimeout(N,0))},onMessageReady:e=>{w("cmp",`onMessageReady ${e}`),e==o&&h("cmp-ui-displayed")},onMessageReceiveData:(e,t)=>{w("cmp",`onMessageReceiveData ${e}`),e==o&&(w("cmp","onMessageReceiveData ",t),R(0!==t.messageId))},onMessageChoiceSelect:(e,t,n)=>{w("cmp",`onMessageChoiceSelect message_type: ${e}`),console.log(),e==o&&(w("cmp",`onMessageChoiceSelect choice_id: ${t}`),w("cmp",`onMessageChoiceSelect choice_type_id: ${n}`),11!==n&&13!==n&&15!==n||setTimeout(N,0))},onPrivacyManagerAction:function(e,t){w("cmp",`onPrivacyManagerAction message_type: ${e}`),e==o&&w("cmp",`onPrivacyManagerAction ${t}`)},onMessageChoiceError:function(e,t){w("cmp",`onMessageChoiceError ${e}`),e==o&&w("cmp",`onMessageChoiceError ${t}`)},onPMCancel:function(e){w("cmp",`onPMCancel ${e}`)},onSPPMObjectReady:function(){w("cmp","onSPPMObjectReady")},onError:function(e,t,n,r){w("cmp",`errorCode: ${e}`),e==o&&(w("cmp",`errorCode: ${t}`),w("cmp",n),w("cmp",`userReset: ${r}`))}}}},"tcfv2"===e?window._sp_.config.gdpr={targetingParams:{framework:e}}:window._sp_.config.ccpa={targetingParams:{framework:e}};const r=document.createElement("script");r.id="sourcepoint-lib",r.src=`${M}/unified/wrapperMessagingWithoutDetection.js`,document.body.appendChild(r)},J=()=>B,W=function(){var e,t,n,o,r,a,i,c,s;switch(v()){case"tcfv2":null===(e=window._sp_)||void 0===e||null===(t=e.gdpr)||void 0===t||null===(n=t.loadPrivacyManagerModal)||void 0===n||n.call(t,106842);break;case"ccpa":null===(o=window._sp_)||void 0===o||null===(r=o.ccpa)||void 0===r||null===(a=r.loadPrivacyManagerModal)||void 0===a||a.call(r,540252);break;case"aus":null===(i=window._sp_)||void 0===i||null===(c=i.ccpa)||void 0===c||null===(s=c.loadPrivacyManagerModal)||void 0===s||s.call(c,540341)}},G="gu-cmp-disabled",q=()=>new RegExp(`${G}=true(\\W+|$)`).test(document.cookie),V={a9:["5f369a02b8e05c308701f829"],acast:["5f203dcb1f0dea790562e20f"],braze:["5ed8c49c4b8ce4571c7ad801"],comscore:["5efefe25b8e05c06542b2a77"],fb:["5e7e1298b8e05c54a85c52d2"],"google-analytics":["5e542b3a4cd8884eb41b5a72"],"google-mobile-ads":["5f1aada6b8e05c306c0597d7"],"google-tag-manager":["5e952f6107d9d20c88e7c975"],googletag:["5f1aada6b8e05c306c0597d7"],ias:["5e7ced57b8e05c485246ccf3"],inizio:["5e37fc3e56a5e6615502f9c9"],ipsos:["5f745ab96f3aae0163740409"],linkedin:["5f2d22a6b8e05c02aa283b3c"],lotame:["5ed6aeb1b8e05c241a63c71f"],nielsen:["5ef5c3a5b8e05c69980eaa5b"],ophan:["5f203dbeeaaaa8768fd3226a"],permutive:["5eff0d77969bfa03746427eb"],prebid:["5f92a62aa22863685f4daa4c"],qm:["5f295fa4b8e05c76a44c3149"],redplanet:["5f199c302425a33f3f090f51"],remarketing:["5ed0eb688a76503f1016578f"],sentry:["5f0f39014effda6e8bbd2006"],teads:["5eab3d5ab8e05c2bbe33f399"],twitter:["5e71760b69966540e4554f01"],"youtube-player":["5e7ac3fae30e7d1bc1ebf5e8"]};var z,Y,Z,K;let Q;b||window.guCmpHotFix||(window.guCmpHotFix={});let X,ee=!1;const te=new Promise((e=>{X=e})),ne=b?S:(z=window.guCmpHotFix).cmp||(z.cmp={init:({pubData:e,country:t})=>{if(q()||b)return;var n,o;if(window.guCmpHotFix.initialised)return void("10.7.1"!==(null===(n=window.guCmpHotFix.cmp)||void 0===n?void 0:n.version)&&console.warn("Two different versions of the CMP are running:",["10.7.1",null===(o=window.guCmpHotFix.cmp)||void 0===o?void 0:o.version]));if(window.guCmpHotFix.initialised=!0,void 0===t)throw new Error("CMP initialised without `country` property. A 2-letter, ISO ISO_3166-1 country code is required.");((e,t)=>{h("cmp-init"),L(e,t)})((e=>{let t;switch(e){case"US":t="ccpa";break;case"AU":t="aus";break;default:t="tcfv2"}return t})(t),null!=e?e:{}),J().then((e=>{Q=e,ee=!0,w("cmp","initComplete")})),X()},willShowPrivacyMessage:()=>te.then((()=>J())),willShowPrivacyMessageSync:()=>{if(void 0!==Q)return Q;throw new Error("CMP has not been initialised. Use the async willShowPrivacyMessage() instead.")},hasInitialised:()=>ee,showPrivacyManager:()=>{te.then(W)},version:"10.7.1",__isDisabled:q,__enable:()=>{document.cookie=`${G}=false`},__disable:()=>{document.cookie=`${G}=true`}}),oe=(b||(Y=window.guCmpHotFix).onConsent||(Y.onConsent=()=>new Promise(((e,t)=>{D((n=>{(n.tcfv2||n.ccpa||n.aus)&&e(n),t("Unknown framework")}))}))),b?()=>y():(Z=window.guCmpHotFix).onConsentChange||(Z.onConsentChange=D)),re=b?(e,t)=>(console.log(`Server-side call for getConsentFor(${e}, ${JSON.stringify(t)})`,"getConsentFor will always return false server-side"),y(),!1):(K=window.guCmpHotFix).getConsentFor||(K.getConsentFor=(e,t)=>{var n;const o=V[e];if(void 0===o||o===[])throw new Error(`Vendor '${e}' not found, or with no Sourcepoint ID. If it should be added, raise an issue at https://github.com/guardian/consent-management-platform/issues`);if(t.ccpa)return!t.ccpa.doNotSell;if(t.aus)return t.aus.personalisedAdvertising;const r=o.find((e=>{var n;return void 0!==(null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[e])}));if(void 0===r)return console.warn(`No consent returned from Sourcepoint for vendor: '${e}'`),!1;const a=null===(n=t.tcfv2)||void 0===n?void 0:n.vendorConsents[r];return void 0===a?(console.warn(`No consent returned from Sourcepoint for vendor: '${e}'`),!1):a}),ae=e=>{const t=`${e}=`;return document.cookie.split(";").reduce(((e,n)=>{const o=n.trim();return o.startsWith(t)&&e.push(o.substring(t.length,o.length)),e}),[])},ie=new Map,ce=({name:e,shouldMemoize:t=!1})=>{const n=ie.get(e);if(n)return n;const o=ae(e);return o.length>0?(t&&ie.set(e,o[0]),o[0]):null};var se,le,ue,de,fe=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},pe=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ge{constructor(e){se.set(this,void 0);try{const t=(new Date).toString();e.setItem(t,t);const n=e.getItem(t)==t;e.removeItem(t),n&&fe(this,se,e)}catch(e){}}isAvailable(){return Boolean(pe(this,se))}get(e){try{var t,n;const{value:o,expires:r}=JSON.parse(null!==(t=null===(n=pe(this,se))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:"");return r&&new Date>new Date(r)?(this.remove(e),null):o}catch(e){return null}}set(e,t,n){var o;return null===(o=pe(this,se))||void 0===o?void 0:o.setItem(e,JSON.stringify({value:t,expires:n}))}remove(e){var t;return null===(t=pe(this,se))||void 0===t?void 0:t.removeItem(e)}clear(){var e;return null===(e=pe(this,se))||void 0===e?void 0:e.clear()}getRaw(e){var t,n;return null!==(t=null===(n=pe(this,se))||void 0===n?void 0:n.getItem(e))&&void 0!==t?t:null}setRaw(e,t){var n;return null===(n=pe(this,se))||void 0===n?void 0:n.setItem(e,t)}}se=new WeakMap;const we=new(de=class{constructor(){le.set(this,void 0),ue.set(this,void 0)}get local(){return fe(this,le,pe(this,le)||new ge(localStorage))}get session(){return fe(this,ue,pe(this,ue)||new ge(sessionStorage))}},le=new WeakMap,ue=new WeakMap,de),me="gu.logger",ve={common:{background:"#052962",font:"#ffffff"},commercial:{background:"#77EEAA",font:"#004400"},cmp:{background:"#FF6BB5",font:"#2F0404"},dotcom:{background:"#000000",font:"#ff7300"},design:{background:"#185E36",font:"#FFF4F2"},tx:{background:"#2F4F4F",font:"#FFFFFF"},supporterRevenue:{background:"#0F70B7",font:"#ffffff"}};var he;const be=e=>{const{background:t,font:n}=ve[e];return`background: ${t}; color: ${n}; padding: 2px 3px; border-radius:3px`};"undefined"!=typeof window&&(window.guardian||(window.guardian={}),(he=window.guardian).logger||(he.logger={subscribeTo:e=>{const t=we.local.get(me)?we.local.get(me).split(","):[];t.includes(e)||t.push(e),we.local.set(me,t.join(",")),ye(e,"ðŸ”” Subscribed, hello!")},unsubscribeFrom:e=>{ye(e,"ðŸ”• Unsubscribed, good-bye!");const t=we.local.get(me).split(",").filter((t=>t!==e));we.local.set(me,t.join(","))},teams:()=>Object.keys(ve)}));const ye=(e,...t)=>{if(!(we.local.get(me)||"").includes(e))return;const n=[be("common"),"",be(e),""];console.log(`%c@guardian%c %c${e}%c`,...n,...t)},_e=/[()<>@,;"\\/[\]?={} \t]/g,Se=e=>!_e.test(e),Ce=({name:e,value:t})=>{if(!((e,t)=>Se(e)&&Se(t))(e,t))throw new Error(`Cookie must not contain invalid characters (space, tab and the following characters: '()<>@,;"/[]?={}') ${e}=${t}`);document.cookie=`${e}=${t}; path=/;${(({isCrossSubdomain:e=!1}={})=>{const t=(({isCrossSubdomain:e=!1}={})=>{var t,n,o;const r=document.domain||"";return"localhost"===r||null!==(t=window.guardian)&&void 0!==t&&null!==(n=t.config)&&void 0!==n&&null!==(o=n.page)&&void 0!==o&&o.isPreview?r:e?["",...r.split(".").slice(-2)].join("."):r.replace(/^(www|m\.code|dev|m)\./,".")})({isCrossSubdomain:e});return"localhost"===t?"":` domain=${t};`})()}`,ie.has(e)&&ie.set(e,ae(e)[0])},Pe=/^[A-Z]{2}$/,Me=e=>{return t=e,"[object String]"===Object.prototype.toString.call(t)&&Pe.test(e);var t};let ke;let Ee;const $e=async()=>(async()=>{if(ke)return ke;const e=we.local.get("gu.geo.override");if(Me(e))return ke=e;const t=ce({name:"GU_geo_country"});if(t&&Me(t))return ke=t;try{const{country:e}=await fetch("https://api.nextgen.guardianapps.co.uk/geolocation").then((e=>e.json()));if(Me(e))return Ce({name:"GU_geo_country",value:e}),ke=e}catch(e){}return null})().then((e=>(Ee=e,e))).catch((e=>(console.log("Error getting location from libs/getLocale"),window.guardian.modules.sentry.reportError(e,"get-country-code"),Ee=Ee||we.local.get("gu.geo.override")||ce({name:"GU_geo_country",shouldMemoize:!0}),Ee)));let Fe;const Oe=(e,t)=>new Promise(((n,o)=>{var r;const a=document.createElement("script");if(a.src=e,Array.from(document.scripts).some((({src:e})=>a.src===e)))return n(void 0);Object.assign(a,t),a.onload=n,a.onerror=()=>{o(new Error(`Failed to load script ${e}`))};const i=document.scripts[0];null===(r=i.parentNode)||void 0===r||r.insertBefore(a,i)})),je=e=>{var t;if(null===(t=window.guardian.ophan)||void 0===t||!t.record)throw new Error("window.guardian.ophan.record doesn't exist");window.guardian.ophan.record(e,(()=>ye("dotcom","ðŸ§¿ Ophan event recorded:",e)))},xe=(e,t=je)=>{t({componentEvent:e})},Te="dotcom.performance";((e,t,n)=>{const o=()=>{((e,t)=>{const{start:n,end:o}=(e=>{const t=window.performance,n=`${Te}.${e}-start`,o=`${Te}.${e}-end`;return"getEntriesByName"in t?{start:()=>{var e,o;const{startTime:r=-1}=null!==(e=null!==(o=t.mark(n))&&void 0!==o?o:t.getEntriesByName(n,"mark")[0])&&void 0!==e?e:{};return Math.ceil(r)},end:()=>{var r,a;t.mark(o);const{duration:i=-1}=null!==(r=null!==(a=t.measure(e,n,o))&&void 0!==a?a:t.getEntriesByName(e,"measure")[0])&&void 0!==r?r:{};return Math.ceil(i)},clear:()=>{t.clearMarks(n),t.clearMarks(o),t.clearMeasures(e)}}:{start:()=>-1,end:()=>-1,clear:()=>{}}})(e);n(),t().then((()=>{o()})).catch((()=>{o()}))})("bootCmp",n.bind(null,null))};window.guardian.mustardCut||window.guardian.polyfilled?o():window.guardian.queue.push(o)})(0,0,(async()=>{if(!window.guardian.config.switches.consentManagement)return;const e=ce({name:"bwid",shouldMemoize:!0}),{pageViewId:t}=window.guardian.config.ophan;return ne.willShowPrivacyMessage().then((e=>{((e,t,n)=>{const{ga:o}=window;o&&window.performance&&window.performance.now&&o("allEditorialPropertyTracker.send","timing","consent","acquired",Math.round(window.performance.now()),n)})(0,0,e?"new":"existing")})).catch((e=>ye("dotcom",`CMP willShowPrivacyMessage - error: ${String(e)}`))),oe((e=>{if(!e)return;const t={component:{componentType:"CONSENT",products:[],labels:e.tcfv2?["01:TCF.v2",`02:${ce({name:"consentUUID"})||""}`,`03:${e.tcfv2.tcString}`]:e.ccpa?["01:CCPA",`04:${ce({name:"ccpaUUID"})||""}`,"05:"+(e.ccpa.doNotSell?"true":"false")]:e.aus?["01:AUS",`06:${ce({name:"ccpaUUID"})||""}`,`07:${ce({name:"consentStatus"})||""}`]:[]},action:"MANAGE_CONSENT"};xe(t),re("google-analytics",e)?Promise.all([Oe("https://www.google-analytics.com/analytics.js"),Oe(window.guardian.gaPath)]).then((()=>{ye("dotcom","GA script loaded")})).catch((e=>console.error(`GA - error: ${String(e)}`))):window.ga=null})),document.onreadystatechange=()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||(()=>{const e=document.querySelector("a[data-link-name=privacy]");if(!document.querySelector("a[data-link-name=privacy-settings]")&&e){const t=e.parentElement;t&&(async()=>{if(void 0===Fe){const e="US"===await $e();Fe={ccpa:e,tcfv2:!e}}return Fe})().then((n=>{const o=e.cloneNode(!1);o.setAttribute("data-link-name","privacy-settings"),o.setAttribute("href","#"),o.innerHTML=n.ccpa?"California resident â€“ Do Not Sell":"Privacy settings";const r=t.cloneNode(!1);r.appendChild(o),t.insertAdjacentElement("beforebegin",r),o.addEventListener("click",ne.showPrivacyManager)})).catch((e=>console.error(`privacy settings - error: ${String(e)}`)))}})()},ne.init({pubData:{platform:"next-gen",browserId:null!=e?e:void 0,pageViewId:t},country:await $e()||void 0}),ye("dotcom","CMP initialised"),Promise.resolve()}))})();
//# sourceMappingURL=bootCmp.0cff8e0ab5ca9749bc3a.js.map