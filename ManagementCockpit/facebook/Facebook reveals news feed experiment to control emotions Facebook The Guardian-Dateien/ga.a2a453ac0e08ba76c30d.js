(()=>{"use strict";"localhost"===window.location.hostname||window.guardian.config.frontendAssetsFullURL;const e="dotcom.performance",n=new Map;var t,i,a,o,r=function(e,n){return{name:e,value:void 0===n?-1:n,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},s=function(e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var t=new PerformanceObserver((function(e){return e.getEntries().map(n)}));return t.observe({type:e,buffered:!0}),t}}catch(e){}},c=function(e,n){var t=function t(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(e(i),n&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},u=function(e){addEventListener("pageshow",(function(n){n.persisted&&e(n)}),!0)},d=function(e,n,t){var i;return function(a){n.value>=0&&(a||t)&&(n.delta=n.value-(i||0),(n.delta||void 0===i)&&(i=n.value,e(n)))}},m=-1,l=function(){return"hidden"===document.visibilityState?0:1/0},f=function(){c((function(e){var n=e.timeStamp;m=n}),!0)},p=function(){return m<0&&(m=l(),f(),u((function(){setTimeout((function(){m=l(),f()}),0)}))),{get firstHiddenTime(){return m}}},v=function(e,n){var t,i=p(),a=r("FCP"),o=function(e){"first-contentful-paint"===e.name&&(m&&m.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=e.startTime,a.entries.push(e),t(!0)))},c=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],m=c?null:s("paint",o);(c||m)&&(t=d(e,a,n),c&&o(c),u((function(i){a=r("FCP"),t=d(e,a,n),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-i.timeStamp,t(!0)}))}))})))},w=!1,g=-1,h={passive:!0,capture:!0},y=new Date,T=function(e,n){t||(t=n,i=e,a=new Date,S(removeEventListener),E())},E=function(){if(i>=0&&i<a-y){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+i};o.forEach((function(n){n(e)})),o=[]}},L=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,n){var t=function(){T(e,n),a()},i=function(){a()},a=function(){removeEventListener("pointerup",t,h),removeEventListener("pointercancel",i,h)};addEventListener("pointerup",t,h),addEventListener("pointercancel",i,h)}(n,e):T(n,e)}},S=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return e(n,L,h)}))},b={};const k="allEditorialPropertyTracker",I=`${k}.set`,M=`${k}.send`,C=(e,n)=>n.substring(1).split("&").map((e=>e.split("="))).filter((n=>2===n.length&&n[0]===e)).map((e=>e[1]))[0],P=({name:e,delta:n,id:t})=>{const{ga:i}=window;i&&i(M,"event",{eventCategory:"Web Vitals",eventAction:e,eventValue:Math.round("CLS"===e?1e3*n:n),eventLabel:t,nonInteraction:!0})},A=()=>{const{GAData:e}=window.guardian,a=(({name:e,shouldMemoize:t=!1})=>{const i=n.get(e);if(i)return i;const a=(e=>{const n=`${e}=`;return document.cookie.split(";").reduce(((e,t)=>{const i=t.trim();return i.startsWith(n)&&e.push(i.substring(n.length,i.length)),e}),[])})(e);return a.length>0?(t&&n.set(e,a[0]),a[0]):null})({name:"GU_U",shouldMemoize:!0}),{ga:m}=window;m(I,"forceSSL",!0),m(I,"title",e.webTitle),m(I,"anonymizeIp",!0),m(I,"dimension3","theguardian.com"),m(I,"dimension4",e.section),m(I,"dimension5",e.contentType),m(I,"dimension6",e.commissioningDesks),m(I,"dimension7",e.contentId),m(I,"dimension8",e.authorIds),m(I,"dimension9",e.keywordIds),m(I,"dimension10",e.toneIds),m(I,"dimension11",e.seriesId),m(I,"dimension16",a?"true":"false"),m(I,"dimension21",C("INTCMP",window.location.search)),m(I,"dimension22",C("CMP_BUNIT",window.location.search)),m(I,"dimension23",C("CMP_TU",window.location.search)),m(I,"dimension26",e.isHosted),m(I,"dimension27",navigator.userAgent),m(I,"dimension29",window.location.href),m(I,"dimension30",e.edition),m(I,"dimension43","dotcom-rendering"),m(I,"dimension50",e.pillar),"#fbLogin"===window.location.hash&&(m(I,"referrer",null),window.location.hash="");try{const e="gu.analytics.referrerVars",n=window.sessionStorage.getItem(e),t=JSON.parse(n||"{}");if(t.value){const n=t.value;(new Date).getTime()-n.time<6e4&&m(M,"event","Click","Internal",n.tag,{nonInteraction:!0,dimension12:n.path}),window.sessionStorage.removeItem(e)}}catch(e){}m(M,"pageview"),5>=100*Math.random()&&(function(e,n){w||(v((function(e){g=e.value})),w=!0);var t,i=function(n){g>-1&&e(n)},a=r("CLS",0),o=0,m=[],l=function(e){if(!e.hadRecentInput){var n=m[0],i=m[m.length-1];o&&e.startTime-i.startTime<1e3&&e.startTime-n.startTime<5e3?(o+=e.value,m.push(e)):(o=e.value,m=[e]),o>a.value&&(a.value=o,a.entries=m,t())}},f=s("layout-shift",l);f&&(t=d(i,a,n),c((function(){f.takeRecords().map(l),t(!0)})),u((function(){o=0,g=-1,a=r("CLS",0),t=d(i,a,n)})))}(P),function(e,n){var t,i=p(),a=r("LCP"),o=function(e){var n=e.startTime;n<i.firstHiddenTime&&(a.value=n,a.entries.push(e)),t()},m=s("largest-contentful-paint",o);if(m){t=d(e,a,n);var l=function(){b[a.id]||(m.takeRecords().map(o),m.disconnect(),b[a.id]=!0,t(!0))};["keydown","click"].forEach((function(e){addEventListener(e,l,{once:!0,capture:!0})})),c(l,!0),u((function(i){a=r("LCP"),t=d(e,a,n),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-i.timeStamp,b[a.id]=!0,t(!0)}))}))}))}}(P),function(e,n){var a,m=p(),l=r("FID"),f=function(e){e.startTime<m.firstHiddenTime&&(l.value=e.processingStart-e.startTime,l.entries.push(e),a(!0))},v=s("first-input",f);a=d(e,l,n),v&&c((function(){v.takeRecords().map(f),v.disconnect()}),!0),v&&u((function(){var s;l=r("FID"),a=d(e,l,n),o=[],i=-1,t=null,S(addEventListener),s=f,o.push(s),E()}))}(P))};((n,t,i)=>{const a=()=>{((n,t)=>{const{start:i,end:a}=(n=>{const t=window.performance,i=`${e}.${n}-start`,a=`${e}.${n}-end`;return"getEntriesByName"in t?{start:()=>{var e,n;const{startTime:a=-1}=null!==(e=null!==(n=t.mark(i))&&void 0!==n?n:t.getEntriesByName(i,"mark")[0])&&void 0!==e?e:{};return Math.ceil(a)},end:()=>{var e,o;t.mark(a);const{duration:r=-1}=null!==(e=null!==(o=t.measure(n,i,a))&&void 0!==o?o:t.getEntriesByName(n,"measure")[0])&&void 0!==e?e:{};return Math.ceil(r)},clear:()=>{t.clearMarks(i),t.clearMarks(a),t.clearMeasures(n)}}:{start:()=>-1,end:()=>-1,clear:()=>{}}})(n);i(),t().then((()=>{a()})).catch((()=>{a()}))})("ga",i.bind(null,null))};window.guardian.mustardCut||window.guardian.polyfilled?a():window.guardian.queue.push(a)})(0,0,(()=>(window.ga=window.ga||((...e)=>{(window.ga.q=window.ga.q||[]).push(e)}),window.GoogleAnalyticsObject="ga",window.ga.l=+new Date,window.ga("create","UA-78705427-1","auto",k,{sampleRate:100,siteSpeedSampleRate:1}),A(),Promise.resolve())))})();
//# sourceMappingURL=ga.a2a453ac0e08ba76c30d.js.map