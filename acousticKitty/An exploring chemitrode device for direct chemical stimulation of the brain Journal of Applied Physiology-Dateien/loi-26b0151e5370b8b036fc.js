(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{176:function(t,e,i){"use strict";i.r(e);var n,r,o;i(85);n=$("body"),r=$(window),(o={$wrapper:null,$list:null,$loiHolder:null,$controls:null,$nextBtn:null,$prevBtn:null,$listItem:null,revers:!1,isTouched:!1,pointerPosition:0,cumulativeShift:0,isMobile:!1,vPort:"screen-sm",year:null,widgetId:null,pagecontext:null,doi:null,decade:null,wrapper:$(".loi-wrapper"),targetPane:null,url:"/specs/products/ux3/widgets/list-of-issues/templates/list-of-issues/ajax/2009.html",isNewLoi:!1,init:function init(){o.$wrapper=$(".swipe__wrapper"),o.$list=$(".loi__list"),o.$loiHolder=$(".dropBlock-loi__holder"),o.$controls='<div class="loi-list__controls"><span class="loi__btn--prev"><i class="icon-arrow_l" aria-hidden="true"></i></span><span class="loi__btn--next"><i class="icon-arrow_r" aria-hidden="true"></i></span></div>',o.isNewLoi=$(".loi-wrapper").hasClass("list-of-issues-detailed"),o.addtionalInitialization(),o.on.build(),o.control(),o.addtionalControls(),r.on("resized",(function(){o.on.rebuild()})),r.load((function(){$(".loi__list:visible").each((function(){o.on.recalculate($(this))}))})),$(".loi__archive").addClass("event-init"),o.on.pageLoad()},addtionalInitialization:function addtionalInitialization(){},ajaxResponse:function ajaxResponse(){},control:function control(){o.$list.on("click","a",(function(t){o.$listItem=$(this),o.on.select()})),n.on("click",".loi__btn--prev",(function(){o.$prevBtn=$(this),o.on.prev()})),n.on("click",".loi__btn--next",(function(){o.$nextBtn=$(this),o.on.next()})),n.on("touchmove",(function(t){o.on.touch.move(t)})),o.responsiveController(),o.isNewLoi&&(o.setActiveTabsInView(),n.on("click",".list-of-issues-detailed .loi__list a",(function(t){t.preventDefault();var e=$(this),i=e.data("target")?e.data("target"):e.attr("href");$(i).hasClass("nested-tab")&&setTimeout((function(){var t="> .loi > .swipe__wrapper .tab__nav";o.on.recalculate($(i).find(t)),$(i).find(".tab__pane.active").find(t).each((function(){o.on.recalculate($(this))}))}),50);var n=e.data("target"),r=$(n),l=r.find(".tab__nav"),s=r.parents(".loi-wrapper").length&&"ascendingOrder"===r.parents(".loi-wrapper").data("order")?"last":"first";if(r.length&&l.length){var c=r.find(".tab__nav").find("li:"+s+"-of-type a"),d=c.data("target")?c.data("target"):c.attr("href"),p=$("[data-target='"+d+"'], [href='"+d+"']");p.click();var u=p.parent().parent().closest(".scroll");o.scrollToActiveLinkInTabList(u)}else o.wrapper=e.closest(".loi-wrapper"),o.get.activeLink(e),o.set.historyState(e),o.link&&"ajax"===$(".list-of-issues-detailed").attr("data-ajax")&&o.load.ajax()}))),o.isNewLoi||(n.on("click",".tab__nav a",(function(){var t=$(this),e=t.data("target")?t.data("target"):t.attr("href");$(e).hasClass("nested-tab")&&setTimeout((function(){var t="> .loi > .swipe__wrapper .tab__nav";o.on.recalculate($(e).find(t)),$(e).find(".tab__pane.active").find(t).each((function(){o.on.recalculate($(this))}))}),50)})),n.on("click",".loi__list a",(function(){o.wrapper=$(this).closest(".loi-wrapper"),0===o.wrapper.length&&(o.wrapper=$(".loi-wrapper")),$(this).closest(".tab__pane").length?(o.get.activeDecade($(this)),o.get.year($(this))):(o.get.decade($(this)),o.get.activeYear($(this))),o.get.doi(),o.get.pagecontext(),o.get.url(),"decade"===(o.wrapper.find(".dropBlock-loi__holder").length?o.wrapper.find(".dropBlock-loi__holder").attr("data-grouptype"):o.wrapper.attr("data-grouptype"))&&o.year&&o.decade&&o.pagecontext&&o.doi&&o.load.ajax()})))},responsiveController:function responsiveController(){$(document).on(o.vPort+"-on",(function(){o.isMobile=!0,$(".loi").addClass("loi--res"),$(".loi__banner").addClass("loi--res"),$(".corrections-container__label").length>0&&$(".corrections-container__label").addClass("w-slide__btn slide-active"),o.setActiveTabsInView()})),$(document).on(o.vPort+"-off",(function(){o.isMobile=!1,$(".loi").removeClass("loi--res"),$(".loi__banner").removeClass("loi--res"),$(".corrections-container__label").length>0&&$(".corrections-container__label").removeClass("w-slide__btn slide-active"),o.setActiveTabsInView()}))},scrollToActiveLinkInTabList:function scrollToActiveLinkInTabList(t){setTimeout((function(){var e=t.find(".tab__nav li.active");if(!(e[0].getBoundingClientRect().left>=t[0].getBoundingClientRect().left&&e[0].getBoundingClientRect().right<=t[0].getBoundingClientRect().right)){var i=t[0].getBoundingClientRect().right-e[0].getBoundingClientRect().right,n=e[0].getBoundingClientRect().left-t[0].getBoundingClientRect().left,r=n>=0?t.scrollLeft()-i+20:t.scrollLeft()+n-20;t.animate({scrollLeft:r},400)}}),50)},setActiveTabsInView:function setActiveTabsInView(){o.$list.filter(":visible").each((function(t,e){var i=$(e).parent();o.scrollToActiveLinkInTabList(i)}))},addtionalControls:function addtionalControls(){},on:{select:function select(){o.$list=o.$listItem.closest(".swipe__wrapper").find(".loi__list"),o.$nextBtn=o.$listItem.closest(".swipe__wrapper").find(".loi__btn--next"),o.$prevBtn=o.$listItem.closest(".swipe__wrapper").find(".loi__btn--prev"),o.$scroll=o.$list.closest(".scroll");var t=o.$listItem.offset().left,e=o.$nextBtn.offset().left,i=o.$prevBtn.offset().left;t>e-o.$listItem.outerWidth()?o.$scroll.stop().animate({scrollLeft:"+="+o.$listItem.outerWidth()},500,"linear",(function(){o.on.activeArrows()})):t<i+o.$prevBtn.outerWidth()&&o.$scroll.stop().animate({scrollLeft:"-="+o.$listItem.outerWidth()},500,"linear",(function(){o.on.activeArrows()}))},next:function next(){o.$list=o.$nextBtn.closest(".swipe__wrapper").find(".loi__list"),o.$prevBtn=o.$list.closest(".loi-list__wrapper").find(".loi__btn--prev"),o.$scroll=o.$list.closest(".scroll");var t=o.$scroll.width()-20;o.$nextBtn.hasClass("inactive")||o.$scroll.stop().animate({scrollLeft:"+="+t},500,"linear",(function(){o.on.activeArrows()}))},prev:function prev(){o.$list=o.$prevBtn.closest(".swipe__wrapper").find(".loi__list"),o.$nextBtn=o.$list.closest(".loi-list__wrapper").find(".loi__btn--next"),o.$scroll=o.$list.closest(".scroll");var t=o.$scroll.width()-20;o.$scroll.stop().animate({scrollLeft:"-="+t},500,"linear",(function(){o.on.activeArrows()}))},touch:{move:function move(t){($(t.target).closest(".loi__list").length||$(t.target).hasClass("loi__list"))&&(o.$list=$(t.target).closest(".loi__list"),o.$wrapper=$(t.target).closest(".loi-list__wrapper"),o.$nextBtn=$(t.target).closest(".loi-list__wrapper").find(".loi__btn--next"),o.$prevBtn=$(t.target).closest(".loi-list__wrapper").find(".loi__btn--prev"),o.on.activeArrows())}},escape:function escape(){},tab:function tab(){},tabRevers:function tabRevers(){},activeArrows:function activeArrows(){o.$scroll=o.$list.closest(".scroll"),parseInt(o.$scroll.scrollLeft())>0?o.$prevBtn.removeClass("inactive"):o.$prevBtn.addClass("inactive");var t=o.$list.width(),e=o.$wrapper.width()+10;parseInt(o.$scroll.scrollLeft())>parseInt(t-e)?o.$nextBtn.addClass("inactive"):o.$nextBtn.removeClass("inactive")},build:function build(){o.$wrapper=o.$list.closest(".swipe__wrapper"),o.$wrapper.addClass("loi-list__wrapper"),o.$list.each((function(t){$(this).width()>o.$wrapper.width()&&$(this).closest(".swipe__wrapper").prepend(o.$controls),$(".loi__btn--prev").addClass("inactive")})),o.$nextBtn=$(".loi__btn--next"),o.$prevBtn=$(".loi__btn--prev"),$(".journal-home").length&&(o.vPort="screen-md")},rebuild:function rebuild(){$(".loi-list__controls").remove(),o.$list=$(".loi__list"),o.$list.each((function(t){$(this).width()>o.$wrapper.width()?($(this).closest(".swipe__wrapper").prepend(o.$controls),$(".loi__btn--prev").addClass("inactive")):$(this).closest(".swipe__wrapper").find(".loi-list__controls").remove()}))},recalculate:function recalculate(t){var e=25;t.find("li").each((function(t){e+=$(this).innerWidth()})),t.width(e),o.$wrapper=t.closest(".swipe__wrapper").addClass("loi-list__wrapper"),e>o.$wrapper.width()?(0===t.closest(".swipe__wrapper").find(".loi-list__controls").length&&t.closest(".swipe__wrapper").prepend(o.$controls),$(".loi__btn--prev").addClass("inactive")):t.closest(".swipe__wrapper").find(".loi-list__controls").remove()},pageLoad:function pageLoad(){var t=window.location.search.substr(1),e={};t.split("&").map((function(t){var i=t.split("=");e[i[0]]=i[1]})),o.$loiHolder.each((function(t,i){var n=$(i).attr("data-grouptype"),r=$(i).prev(".loi__banner-list"),o=window.innerWidth>parseInt(UX.grid.screenSm);if(e.year&&o)if("decade"===n){var l=$("[data-expand="+e.year+"]",i);if(l.length){var s=l.closest("li[role=tabpanel]").attr("id"),c=$("a[href$=#"+s+"]",i);$(".loi__archive",r).trigger("click"),c.length&&c.trigger("focus").trigger("click"),setTimeout((function(){l.trigger("focus").trigger("click")}),100)}}else"year"===n&&($(".loi__archive",r).trigger("click"),$("[data-expand="+e.year+"]",i).trigger("focus").trigger("click"));e.volume&&"volume"===n&&($(".loi__archive",r).trigger("click"),$("[data-expand="+e.volume+"]",i).trigger("click"))}))}},load:{},get:{year:function year(t){o.year=t.find("span").text(),o.targetPane=t.attr("href")},activeDecade:function activeDecade(t){var e=t.closest(".tab__pane").attr("aria-labelledby");o.decade=$("#"+e).data("decade")?$("#"+e).data("decade"):$("#"+e).find("span").text()},decade:function decade(t){o.decade=t.data("decade")?t.data("decade"):t.find("span").text()},activeYear:function activeYear(t){var e=t.attr("href");o.year=$(e).find(".loi__list").find(".active").find("span").text(),o.targetPane=$(e).find(".loi__list").find(".active").find("a").attr("href")},url:function url(){o.isNewLoi?(o.widgetId=$(".loi-wrapper").attr("data-db-parent-of"),void 0===o.widgetId&&(o.widgetId=o.wrapper.attr("data-widget-id")),o.url="/pb/widgets/loi/content?widgetId="+o.widgetId+"&pbContext="+o.pagecontext.replace(/#/g,"%23")+"&id="+o.link):(o.widgetId=o.wrapper.attr("data-db-parent-of"),void 0===o.widgetId&&(o.widgetId=o.wrapper.attr("data-widget-id")),o.url="/pb/widgets/loi/loiAjax?widgetId="+o.widgetId+"&pbContext="+o.pagecontext+"&doi="+o.doi+"&decadeRange="+o.decade+"&yearParam="+o.year)},doi:function doi(){o.doi=o.wrapper.attr("data-journal-doi")},pagecontext:function pagecontext(){o.pagecontext=encodeURI($("[name='pbContext']").attr("content"))},activeLink:function activeLink(t){var e,i;t.attr("data-url")?(e=t.attr("data-url"),i=t.data("target"),o.link=e,o.targetPane=$(i)):(e=t.attr("href"),i=$(e).find(".tab__nav .active a.empty"),o.targetPane=i.data("target")?i.data("target"):i.attr("href"),o.link=i.attr("data-url"))}},set:{historyState:function historyState(t){var e=t.attr("href");e&&history.replaceState(null,"loi history",e)}},check:{viewPort:function viewPort(){$(".loi").each((function(){$(this).attr("data-ctrl-res")&&(o.vPort=$(this).attr("data-ctrl-res"))}))}}}).load.ajax=function(){var t=UX.loi.targetPane[0];if(!t||!t.childNodes.length){var e=document.querySelector(".tab__pane"),i={headers:{"accept-language":document.documentElement.lang||"en-US,en;q=0.9"}};o.isNewLoi&&(UX.loi.get.doi(),UX.loi.get.pagecontext(),UX.loi.get.url()),e&&(e.classList.remove("loading"),t.classList.add("loading")),fetch(UX.loi.url,i).then((function(e){e.text().then((function(e){t.innerHTML=e,t.classList.remove("loading"),o.ajaxResponse()}))})).catch((function(e){console.error(e),t.classList.remove("loading")}))}},UX.loi=o},85:function(t,e){self.fetch||(self.fetch=function(t,e){return e=e||{},new Promise((function(i,n){var r=new XMLHttpRequest,o=[],l=[],s={};for(var c in r.open(e.method||"get",t,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,i){o.push(e=e.toLowerCase()),l.push([e,i]),s[e]=s[e]?s[e]+","+i:i})),i(function a(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function text(){return Promise.resolve(r.responseText)},json:function json(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function blob(){return Promise.resolve(new Blob([r.response]))},clone:a,headers:{keys:function keys(){return o},entries:function entries(){return l},get:function get(t){return s[t.toLowerCase()]},has:function has(t){return t.toLowerCase()in s}}}}())},r.onerror=n,r.withCredentials="include"==e.credentials,e.headers)r.setRequestHeader(c,e.headers[c]);r.send(e.body||null)}))})}}]);
//# sourceMappingURL=loi-26b0151e5370b8b036fc.js.map